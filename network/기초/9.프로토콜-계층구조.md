## 프로토콜 계층구조

* 프로토콜의 계층은 HW, SW로 나뉘어 구성됩니다.
* 로직을 세부 모듈로 나누어 각 계층이 각자의 로직을 수행하도록 합니다.
* 계층은 상/하위로 나누어지는데, 하위계층은 상위계층에게 서비스를 제공하고 상위계층은 하위계층을 기반으로 작업을 수행합니다.

![](https://www.electronicdesign.com/sites/electronicdesign.com/files/uploads/2013/03/0313_WTD_ZigBee_F1.gif)


* A 컴퓨터가 B 컴퓨터에게 데이터를 보낸다고 가정하겠습니다. 
* A가 데이터를 전송한다면 데이터를 전송하기 위한 응용 프로그램을 실행시켰을텐데, 응용 프로그램은 대개 제일 윗 계층(응용 계층)에 있습니다. 
* 응용계층에서 응용프로그램이 갖는 포트번호를 통해 바로 아래 계층인 표현계층(presentation layer)으로 데이터를 내려보냅니다.
* 응용 프로그램의 포트번호가 6260번이라면, 6260번 포트를 통해 내려온 데이터에 표현계층의 헤더가 붙게 되는것입니다.
 그 정보는 또 아랫 계층으로 내려가게 되고, 네트워크 계층 도달했을 때 컴퓨터의 iP주소를 붙이게 됩니다. 
* 이러한 과정을 거쳐서 처음으로 만들어진 데이터가 아래 계층으로 내려갈수록 각 계층에서 헤더에 정보를 붙입니다.
* 가장 아래에 위치한 물리계층에서는 목적지가 B라는 것을 알게 되고 물리적 네트워크에 데이터를 띄워보냅니다.
<br><br>


데이터를 전송하는 A 컴퓨터의 경우 프로토콜 계층에서 데이터가 위에서 아래로 이동했다면, 
데이터를 수신하는 B 컴퓨터에서는 프로토콜 계층에서 아래에서 위로 데이터가 이동합니다.
맨 아래 계층에서부터 헤더부분을 하나씩 떼어내며 각 계층에서 필요한 정보를 받고 응용 프로그램에서는 원래 데이터(raw packet)만을 받는 것입니다.
<br><br>
이러한 프로토콜 계층구조는 OSI 7계층 모델을 따릅니다. 각 계층에서 맡는 역할을 아래와 같습니다. 


![](https://t1.daumcdn.net/thumb/R1280x0/?fname=http://t1.daumcdn.net/brunch/service/user/1dLN/image/bUFeQaguJSj5R9vfN-Bbef54J68.jpg)
<br><br>
내용 출처 : [9강.프로토콜 계층구조](https://www.edwith.org/tel-ewha-course/lecture/17875/)
